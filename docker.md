# Docker.

Что такое Docker?

- Docker это система виртуализации с применением контейнеризации ("Контейнеризиратор приложений").

Как работает Docker?

- Docker запускает внутри себя виртуальную машину (контейнеры) в которой производит сборку проекта (По инструкциям из файла "Dockerfile"), и его запуск, после чего проект (приложение), всегда работает внутри контейнера Docker.

Зачем используется Docker?

- Docker автоматизирует развертывание (запуск проекта на сервере или локальной машине производится парой команд, и не требует установки/настроек зависимостей, что требуется в случаях когда Docker не используется)
  это ускоряет и упрощает запуск проекта, помимо этого Docker "изолирует" запуск проекта в контейнере, благодаря чему проект работает в СОБСТВЕННОЙ, НАСТРАИВАЕМОЙ среде Linux (А так же в систему, на которой запущен Docker, отдаются лишь требумые порты, и файлы).

Какие виды виртуализации существуют ?

1. Паравиртуализация
2. Эмуляция
3. Контейнеризация ("Контейнерная виртуализация")

Чем отличается виртуализация от контейнеризации?

- При использовании контейнеризации не используется Гипервизор (Hypervisor), присутствует гостевая ОС (Guest OS) для каждого приложения.

Как посмотреть список контейнеров?

- `docker ps -a` (аргумент `-a` показывает все контейнеры, а не только активные), эта команда так же покажет состояния и статус контейнеров.

Как подключиться к контейнеру для исполнения команд внутри?

- `docker exec --it <имя_контейнера> /bin/sh`, имя контейнера можно узнать через `docker ps` (`-a` для вывода включая не запущенные (сокращение от All)) (container id / name(s))

Что такое Docker Image?

- Docker Image (он же Docker Образ) это образ собранного приложения через файл Dockerfile, подробнее можно узнать изучив то, как работает сборка и запуск. Посмотреть имеющиеся Docker образы можно через `docker images` (`-a` для вывода включая не используемые (сокращение от All))

Что такое Dockerfile?

- Dockerfile это файл инструкций для сборки образа, которые уже готовы к запуску.

Как начать использовать Docker в проекте?

1. Создать Dockerfile, описать процесс сборки самого проекта.
2. Собрать образ на локальной машине или сервере.
3. (Необяз.) Опубликовать образ в Registry.

Что такое Docker Registry?

- Публичное (и не только) хранилище образов, которые можно запускать без создания Dockerfile, образ загрузится и установится из регистра.

Как очистить неиспользуемые образы и контейнеры?

- Для удаления неиспользуемых образов, `docker image prune`, для остановленных контейнеров, `docker container prune`, _ВАЖНО_: Как любые команды, удаляющие что либо, исполнять такие команды стоит с опасностью, если вы уверены что ничего не удалиться важного, но всё же, зачастую образы занимают большое количество места на диске (по нескольку гигабайт), и по факту могут быть собраны заново (что увеличит время запуска), используейте с осторожностью!

### Docker-Compose.

Что такое Docker-Compose?

- Docker-Compose это утилита для мульти-контейнерных приложений, например, запуск проекта с СУБД (Базой данных), и любыми другими зависимостями (Пример: Redis, Database Poller, Nginx и любое требуемое ПО).

Как работает Docker-Compose?

- Docker-Compose запускает сразу несколько контейнеров описанных в файле "docker-compose.yml", там же можно подключить их через Docker networks (Интернет(!) сети внутри Docker контейнеров для связи их между собой (Например, СУБД и Сервер приложения)).

Как запустить Docker-Compose?

- Docker-Compose предоставляет команды для управления развертыванием и управлением, через `docker-compose ...`. Для запуска (Так называемого _поднятия_ приложения) используется команда `docker-compose up`. Дополнение: Для того, что бы сделать так называемый _detach_ запуск (Приложение не будет открыто в окне терминало с которого произведён запуск, подключиться к терминалу контейнера можно в будущем), используется аргумент `-d`, т.е `docker-compose up -d`. Для того что бы произвести пересборку контейнеров при запуске, используется аргумент `--build`, т.е `docker-compose up --build`. Аргументы можно комбинировать, например `docker-compose up -d --build` произведёт _detach_ запуск контейнеров с соответствующей пересборкой.

Какие основные команды предоставляет Docker-Compose?

- `up` для сборки и запуска контейнеров (см. выше), `down` для остановки контейнера, так же большинство команд копируются\* с команд Docker, но запускаются внутри директории проекта для конкретных контейнеров [Документация по командам](https://github.com/docker/compose/blob/v2/docs/reference/compose.md)
